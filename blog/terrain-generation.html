<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 5.6.0 for Hugo"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload as=style href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Source+Sans+Pro:wght@200;300;400;700&display=swap"><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Roboto+Mono&family=Source+Sans+Pro:wght@200;300;400;700&display=swap" media=print onload='this.media="all"'><meta name=author content="Tahsin Tariq"><meta name=description content="Generating 3D terrain surfaces using Poisson Disc Sampling"><link rel=alternate hreflang=en-us href=https://tahsintariq.github.io/blog/terrain-generation.html><meta name=theme-color content="#1565c0"><link rel=stylesheet href=../css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css media=print onload='this.media="all"'><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css integrity="sha512-W0xM4mr6dEP9nREo7Z9z+9X70wytKvMGeDsj7ps2+xg5QPrEBXC8tAW1IFnzjR6eoJ90JmCnFzerQJTLzIEHjA==" crossorigin=anonymous media=print onload='this.media="all"'><link rel=stylesheet href=../css/wowchemy.7d31d7a85d84d3fa1c19b09946b72266.css><link rel=stylesheet href=../css/libs/chroma/github-light.min.css title=hl-light media=print onload='this.media="all"'><link rel=stylesheet href=../css/libs/chroma/dracula.min.css title=hl-dark media=print onload='this.media="all"' disabled><script async src="https://www.googletagmanager.com/gtag/js?id=UA-36911186-4"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}function trackOutboundLink(e,t){gtag("event","click",{event_category:"outbound",event_label:e,transport_type:"beacon",event_callback:function(){t!=="_blank"&&(document.location=e)}}),console.debug("Outbound link clicked: "+e)}function onClickCallback(e){if(e.target.tagName!=="A"||e.target.host===window.location.host)return;trackOutboundLink(e.target,e.target.getAttribute("target"))}gtag("js",new Date),gtag("config","UA-36911186-4",{}),gtag("set",{cookie_flags:"SameSite=None;Secure"}),document.addEventListener("click",onClickCallback,!1)</script><link rel=manifest href=../manifest.webmanifest><link rel=icon type=image/png href=../media/icon_hu0ce21649deb3bc76a53aa6e76f71d53f_14131_32x32_fill_lanczos_center_3.png><link rel=apple-touch-icon type=image/png href=../media/icon_hu0ce21649deb3bc76a53aa6e76f71d53f_14131_180x180_fill_lanczos_center_3.png><link rel=canonical href=https://tahsintariq.github.io/blog/terrain-generation.html><meta property="twitter:card" content="summary"><meta property="twitter:site" content="@tariq_tahsin"><meta property="twitter:creator" content="@tariq_tahsin"><meta property="og:site_name" content="Tahsin Tariq Banna"><meta property="og:url" content="https://tahsintariq.github.io/blog/terrain-generation.html"><meta property="og:title" content="Procedural Terrain Generation | Tahsin Tariq Banna"><meta property="og:description" content="Generating 3D terrain surfaces using Poisson Disc Sampling"><meta property="og:image" content="https://tahsintariq.github.io/media/logo_hu05f0f36ce171b899b64ba629782702e3_51428_300x300_fit_lanczos_3.png"><meta property="twitter:image" content="https://tahsintariq.github.io/media/logo_hu05f0f36ce171b899b64ba629782702e3_51428_300x300_fit_lanczos_3.png"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2020-04-15T00:00:00+00:00"><meta property="article:modified_time" content="2020-04-15T00:00:00+00:00"><title>Procedural Terrain Generation | Tahsin Tariq Banna</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents class=page-wrapper data-wc-page-id=88d9dcc80c3ac0d69058e98bd58f0037><script src=../js/wowchemy-init.min.1ee5462d74c6c0de1f8881b384ecc58d.js></script><aside class=search-modal id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=# aria-label=Close><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control aria-label=Search...></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><div class=page-header><header class=header--fixed><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container-xl><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=../><img src=../media/logo_hu05f0f36ce171b899b64ba629782702e3_51428_0x70_resize_lanczos_3.png alt="Tahsin Tariq Banna"></a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar-content aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=../><img src=../media/logo_hu05f0f36ce171b899b64ba629782702e3_51428_0x70_resize_lanczos_3.png alt="Tahsin Tariq Banna"></a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=../><span></span></a></li><li class=nav-item><a class=nav-link href=../><span>Home</span></a></li><li class=nav-item><a class=nav-link href=../publication><span>Publications</span></a></li><li class=nav-item><a class="nav-link active" href=../blog/><span>Blog</span></a></li><li class=nav-item><a class=nav-link href=../files/cv/cv.pdf><span>CV</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class="nav-item d-none d-lg-inline-flex"><a class=nav-link href=https://twitter.com/tariq_tahsin data-toggle=tooltip data-placement=bottom title="Follow me on Twitter" target=_blank rel=noopener aria-label="Follow me on Twitter"><i class="fab fa-twitter" aria-hidden=true></i></a></li><li class="nav-item d-none d-lg-inline-flex"><a class=nav-link href=https://github.com/TahsinTariq target=_blank rel=noopener aria-label=github><i class="fab fa-github" aria-hidden=true></i></a></li><li class=nav-item><a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a></li></ul></div></nav></header></div><div class=page-body><div class="container-fluid docs"><div class=row><div class="col-xl-2 col-lg-2 d-none d-xl-block d-lg-block empty"></div><div class="col-2 col-xl-2 col-lg-2 d-none d-lg-block docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>Contents</a></li></ul><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#introduction>Introduction</a></li><li><a href=#generating-sample-points>Generating sample points</a></li><li><a href=#creating-a-rough-3d-terrain>Creating a rough 3D terrain</a></li><li><a href=#smoother-surfaces>Smoother surfaces</a></li><li><a href=#example-videos>Example videos</a></li></ul></li></ul></li></ul></nav></div><main class="col-xl-8 col-lg-8 docs-content" role=main><article class=article><div class="article-container pt-3"><h1>Procedural Terrain Generation</h1><p class=page-subtitle>Using Poisson Disc Sampling</p><div class=article-metadata><span class=article-date>Posted Apr 15, 2020</span>
<span class=article-date></span><span class=middot-divider></span>
<span class=article-reading-time>3 min read</span></div></div><div class=article-container><div class=article-style align=justify><h3 id=introduction>Introduction</h3><p>Creating a terrain manually for a game or just for visualization purposes is a really daunting task. Instead, a better way to do so is to programmatically generate it by passing some parameters to a code. Here, I discuss how to make a procedural terrain generator mostly using processing for python. This can also be done in any other language or game engine or 3D design software. I will be making a simple terrain using height maps for stylized purposes. But, first we need to understand how to generate height maps using perlin noise.</p><p>Perlin noise is a procedurally generated noise texture developed by ken perlin. How perlin noise is generated using code is discussed thoroughly <strong><a href=https://rtouti.github.io/graphics/perlin-noise-algorithm target=_blank rel=noopener>here</a></strong>. I&rsquo;ll be using the built in noise function that generates perlin noise for processing.</p><h3 id=generating-sample-points>Generating sample points</h3><p>In order to render the terrain, we need some geometry. We can generate tile the plane with cubes, but that would look more like minecraft. We could choose randomly generated points. But purely random or even pseudo-random choices have a tendency of clustering together. This phenomenon is known as <a href=https://en.wikipedia.org/wiki/Poisson_clumping target=_blank rel=noopener><code>Poisson Clumping</code></a>. Pure or pseudo-random points are not good choices because of this phenomenon, as shown below.</p><figure id=figure-generated-random-points-tend-to-cluster-together><div class="d-flex justify-content-center"><div class=w-100><img src=../img/random.png alt="Generated random points tend to cluster together." loading=lazy data-zoomable></div></div><figcaption data-pre=Figure&nbsp; data-post=:&nbsp; class=numbered>Generated random points tend to cluster together.</figcaption></figure><p>So, instead we use a different sort of random point generation called <strong><a href=https://en.wikipedia.org/wiki/Supersampling#Poisson_disk target=_blank rel=noopener><code>Poisson Disc Sampling</code></a></strong>. This generates random points at a given interval and thus making them more uniform. This is a much better choice for generating terrains.</p><p>Now if we triangulate the points,We should get a plane with enough geometry to offset using the generated height map. I go into some details on triangulation <a href=https://tahsintariq.github.io/triangulation target=_blank rel=noopener><code>here</code></a>. The final result should look something like this (without the animation of course):</p><div class=videoWrapper><iframe src=https://tahsintariq.github.io/p5js/P5_Sketches/P5_Web_Collection/Delunay_triangulation data-position="center center"></iframe></div><h3 id=creating-a-rough-3d-terrain>Creating a rough 3D terrain</h3><p>Now we rotate the canvas on the y-axis so it looks more like a plane.</p><figure id=figure-the-entire-plane-rotated-along-the-y-axis-to-give-it-a-3d-look><div class="d-flex justify-content-center"><div class=w-100><img src=../img/random_plane.png alt="The entire plane rotated along the Y-axis to give it a 3D look" loading=lazy data-zoomable></div></div><figcaption data-pre=Figure&nbsp; data-post=:&nbsp; class=numbered>The entire plane rotated along the Y-axis to give it a 3D look</figcaption></figure><p>Now, using the generated height map, we offset the z-position of the points by the value corresponding to that x and y position in the height map. This gives us a stylized terrain.</p><figure id=figure-a-generated-rough-terrain><div class="d-flex justify-content-center"><div class=w-100><img src=../img/terrain.png alt="A generated rough terrain" loading=lazy data-zoomable></div></div><figcaption data-pre=Figure&nbsp; data-post=:&nbsp; class=numbered>A generated rough terrain</figcaption></figure><p>We can change the shape of this terrain by changing the noise using offsets. This can result in traversing through the terrain as if we were flying on top of it, or changing the entire topology of the terrain. It will depend on how the noise is being offset.</p><p>I&rsquo;ve put the processing.py codes for this project <a href=https://github.com/TahsinTariq/Processing/tree/master/Pycessing/Perlin/Terrain_generation target=_blank rel=noopener><code>here</code></a>.</p><h3 id=smoother-surfaces>Smoother surfaces</h3><p>The generated surface is still pretty low resolution and looks pointy. This can be solved in two ways. First, we can either increase the number of points from the poisson disk sampling process. The other method is using the <a href=https://en.wikipedia.org/wiki/Catmull%E2%80%93Clark_subdivision_surface target=_blank rel=noopener><code>Catmull-Clark algorithm</code></a>. This is a technique used in 3D computer graphics to represent curved surfaces by the specification of a coarser polygonal mesh and produced by a recursive algorithmic method.</p><p>Furthermore, the same process can be used to generate terrain in 3D modelling software. The Catmull-Clark algorithm can be used easily here as most software have built in support. The following demonstrates the improvements made while using the algorithm.</p><div style=display:flex><div style="flex:1;padding:0 1% 0 0"><img src=../img/terrain_blend_1.png alt=coarse data-position="center center"></div><div style="flex:1;padding:0 1% 0 0"><img src=../img/terrain_blend_2.png alt=subdivided data-position="center center"></div></div><article class=grid style=text-align:center>The left image shows a coarse pointy surface, the right image shows a smooth, curved, subdivided surface
and below is an animated terrain made in Blender 3D</article><video controls loop autoplay>
<source src=../img/terrain_vid.mp4></video><h3 id=example-videos>Example videos</h3><p>Below are two different renders I&rsquo;ve made using the processing.py. One with a half inverted render and the other colored according to the height of the points i.e. a topological height map.</p><style>*.videoWrapper{position:relative;width:100%;padding-bottom:56.25%;height:0}video{display:grid;margin:auto;width:90%;height:90%}*.videoWrapper iframe{position:absolute;margin:auto;top:0;bottom:0;left:0;right:0;text-align:center;width:90%;height:90%}*.grid{display:grid;place-items:center}</style><style>iframe{border:none}</style><div class=videoWrapper><iframe src=https://www.youtube.com/embed/kLhleR4t7LQ data-position="center center"></iframe></div><div class=videoWrapper><iframe src=https://www.youtube.com/embed/-vS37cZq3B8 data-position="center center"></iframe></div></div><script src=../%20js/codefolding.js></script>
<link rel=stylesheet href=../%20css/codefolding.css><div class="media author-card content-widget-hr"><a href=https://tahsintariq.github.io/><img class="avatar mr-3 avatar-circle" src=../authors/admin/avatar_hu318e47ea0c9997199b098a82eb334f31_8060_270x270_fill_q75_lanczos_center.jpg alt="Tahsin Tariq"></a><div class=media-body><h5 class=card-title><a href=https://tahsintariq.github.io/>Tahsin Tariq</a></h5><h6 class=card-subtitle>Masters Student</h6><p class=card-text>I am a Master&rsquo;s Student studying Robotics and Mechatronics Engineering with a focus on Computer Vision.</p><ul class=network-icon aria-hidden=true><li><a href=../#contact><i class="fas fa-envelope"></i></a></li><li><a href=https://twitter.com/tariq_tahsin target=_blank rel=noopener><i class="fab fa-twitter"></i></a></li><li><a href="https://scholar.google.com/citations?user=7pro7tAAAAAJ&amp;hl=en" target=_blank rel=noopener><i class="fas fa-graduation-cap"></i></a></li><li><a href=https://github.com/TahsinTariq target=_blank rel=noopener><i class="fab fa-github"></i></a></li><li><a href=../files/cv/cv.pdf><i class="ai ai-cv"></i></a></li></ul></div></div><div class=article-widget><div class=post-nav><div class=post-nav-item><div class=meta-nav>Next</div><a href=../blog/eight-puzzle-game.html rel=next>Eight-Puzzle Game</a></div></div></div></div></article></main></div></div></div><div class=page-footer><div class=container><footer class=site-footer><p class="powered-by copyright-license-text">© 2023 Tahsin Tariq. This work is licensed under <a href=https://creativecommons.org/licenses/by-sa/4.0 rel="noopener noreferrer" target=_blank>CC BY SA 4.0</a>.</p><p class="powered-by footer-license-icons"><a href=https://creativecommons.org/licenses/by-sa/4.0 rel="noopener noreferrer" target=_blank aria-label="Creative Commons"><i class="fab fa-creative-commons fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-by fa-2x" aria-hidden=true></i>
<i class="fab fa-creative-commons-sa fa-2x" aria-hidden=true></i></a></p><p class=powered-by>Site built with lightly customized version of <a href=https://github.com/simongravelle/simongravelle.github.io target=_blank rel=noopener>Simon Gravelle</a> which itself is customized from <a href=https://github.com/wowchemy/starter-hugo-academic target=_blank rel=noopener>Wowchemy Academic</a>.
Code available on <a href=https://github.com/tahsintariq/tahsintariq.github.io target=_blank rel=noopener>Github</a>.</p><br style=line-height:5px></footer></div></div><script src=../js/vendor-bundle.min.32ee83730ed883becad04bc5170512cc.js></script>
<script id=search-hit-fuse-template type=text/x-template>
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script><script src=https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin=anonymous></script>
<script id=page-data type=application/json>{"use_headroom":true}</script><script src=../js/wowchemy-headroom.c251366b4128fd5e6b046d4c97a62a51.js type=module></script>
<script src=../en/js/wowchemy.min.85290d887e7fcdd400ccb3ffb9bcd3e3.js></script><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i> Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i> Download</a><div id=modal-error></div></div></div></div></div><script src=../js/wowchemy-publication.68f8d7090562ca65fc6d3cb3f8f2d2cb.js type=module></script></body></html>